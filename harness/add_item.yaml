validate:
-
  should: pass
  vars:
    list_name: cranberries
    values: delores@cranberries.com
-
  should: fail when missing 'value'
  vars:
    list_name: cranberries
  expected: values must not be blank
-
  should: fail when missing 'list_names'
  vars:
    values: delores@cranberries.com
  expected: a list name is required

request:
-
  should: correctly formulate the request
  vars:
    list_name: my_list
    values: foo@bar.com
  expected:
    headers:
      Accept: application/json
      Authorization: Basic WDpmb28=
      Content-Type: application/json
    method: POST
    url: https://app.suppressionlist.com/lists/my_list/items
    body: '{"values":["foo@bar.com"]}'

response:
-
  should: parse success
  res:
    headers:
      Content-Type: application/json
      'X-Runtime': 0.123
    status: 200
    body: >
      {}
  expected:
    add_item:
      outcome: success
      reason: null
      duration: 0.123

extra_vars:
  activeprospect:
    api_key: foo
