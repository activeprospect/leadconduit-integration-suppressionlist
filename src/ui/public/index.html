<!DOCTYPE html>
<head>
  <title>SuppressionList</title>
  <style type="text/css">
    .modal-footer {
      position: absolute;
      bottom: 0;
      padding-bottom: 5px !important;
      width: 100%;
    }
    .buttons .button {
      margin-top: 20px;
      width: 47.5%;
      float: left;
    }
    .buttons .button:first-child {
      margin-right: 5%;
    }
    .loading-page {
      position: relative;
      height: 300px;
    }
    .loading-page .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      margin-top: -12px;
      margin-left: -12px;
    }
  </style>

  <!-- App specific code -->
  <script src="dist/index.js" type="text/javascript"></script>
</head>
<body>
  <div class="modal-header">
    <h3>Set up SuppressionList</h3>
  </div>
  <pages>
    <page ng-controller="Page1Ctrl">
      <div class="modal-body" ng-if="state.action == 'is_unique'">
        <p>
          SuppressionList will check for unique leads and prevent them from being
          delivered again.
        </p>
        <form>
          <ul ng-if="error">
            <li class="message-banner error" ng-bind="error"></li>
          </ul>
          <ul>
            <li>
              <label>What field do you want to use to check for duplicates?</label>
              <select ng-options="field.value as field.text for field in config.flow.fields" ng-model="state.values">
                <option value="">- Select -</option>
              </select>
            </li>
          </ul>
        </form>
      </div>
      <div class="modal-footer">
        <button class="primary" ng-click="next()" ng-disabled="!state.values ">Next</button>
        <button ng-click="cancel()" class="tertiary-control">Cancel</button>
      </div>
    </page>
    <page ng-controller="Page2Ctrl">
      <div class="modal-body">
        <form>
          <p>
            How long do you want to wait before allowing a lead to be delivered again?
          </p>
          <ul>
            <li>
              <select ng-options="time.value as time.text for time in amounts" ng-model="state.ttl">
                <option value="">- Select -</option>
              </select>
            </li>
            <li ng-if="state.ttl == 'custom'">
              <input type="number" ng-model="state.ttlSeconds" />
              <select ng-options="unit.value as unit.text for unit in units" ng-model="state.ttlUnit">
                <option value="">- Select -</option>
              </select>
            </li>
          </ul>
        </form>
      </div>
      <div class="modal-footer">
        <button class="primary" ng-click="finish()" ng-disabled="!state.action || finishing" ng-class="{ processing: finishing }">OK</button>
        <button ng-click="cancel()" class="tertiary-control">Cancel</button>
      </div>
    </page>
  </pages>
</body>
